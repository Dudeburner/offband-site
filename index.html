<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Offband — Home</title>
  <meta name="description" content="Hands-on security notes and small operator tools. Built in public." />
  <link rel="preload" href="/assets/site.css" as="style">
  <link rel="stylesheet" href="/assets/site.css" />
  <script defer src="/assets/include.js"></script>
  <script defer src="/assets/sidebar.js"></script>
</head>
<body id="home" class="has-hero">
  <div data-include="/components/topbar.html"></div>

  <div class="layout">
    <!-- Sidebar (component include) -->
    <aside id="sidebar" data-include="/components/sidebar.html"></aside>

    <!-- Content view -->
    <main id="content" class="content">

      <!-- Brand + mission -->
      <section class="hero hero--center">
        <div class="hero__brandmark">
          <h1 class="brandmark">
            <img class="brand-logo" src="/assets/logo-badge.svg" alt="" width="96" height="96" aria-hidden="true" />
            <span class="brand-name">Offband</span>
          </h1>
        </div>

        <p class="lede">
          Hands‑on security notes and small operator tools. Built in public.
        </p>
        <p class="subtle">
          Homelab hardening, OSINT workflows, and repeatable setups you can
          clone, adapt, and ship.
        </p>

        <div class="hero__actions">
          <a class="btn btn--primary" href="/writeups/">Read writeups</a>
          <a class="btn" href="/security/">See dashboard</a>
        </div>
      </section>

      <!-- Long-form: why Offband exists -->
      <section class="prose longform" aria-label="About Offband">
        <h2 class="h3">Why Offband</h2>
        <p>
          Offband is a small security lab. Our name fits our mindset: operate slightly off the main channel, amplify signal for our community, and share clear, reproducible steps that anyone can follow. We document what we actually use—homelab hardening, small purpose‑built tools, and incident notes to monitor how those tools behave in the wild. The intent is to surface patterns that make security less abstract and more reusable, giving others a clearer path when building their own systems.
        </p>
        <p>
          Offband isn’t a static website—it’s a living notebook. Logs append automatically as events unfold, and you can follow along in real time as issues surface, responses are tested, and fixes are applied. That means you’re not just reading a post‑mortem, you’re watching the process happen.
        </p>
        <p>
          Everything ties back to the core sections: <a href="/security/logs/">logs</a> track activity and incidents, <a href="/security/tools/">tools</a> are the small scripts and helpers I use to respond, and <a href="/writeups/">writeups</a> capture longer reflections once the dust settles. If you need to reach out or disclose, the <a href="/connect/">connect page</a> has secure contact and PGP details.
        </p>
      </section>

      <!-- Featured: latest writeup + latest log -->
      <section id="featured" class="card featured" aria-label="Recent activity">
        <h2 class="h3">Latest from the lab</h2>
        <ul id="featured-list" class="featured-list">
          <li class="muted">Loading recent activity…</li>
        </ul>
      </section>

      <script>
      (async function () {
        const list = document.getElementById('featured-list');
        if (!list) return;

        async function latestItem(indexUrl, requiredPrefix, fallbackLabel) {
          try {
            const res = await fetch(indexUrl, { headers: { 'Accept': 'text/html' } });
            if (!res.ok) throw new Error('fetch failed');
            const html = await res.text();
            const doc = new DOMParser().parseFromString(html, 'text/html');
            // Try common list wrappers first, then fall back to any anchors
            const candidates = Array.from(doc.querySelectorAll(
              'main a, .list a, .posts a, .post-list a, .logs a, .logs-list a, a'
            ));
            const internal = candidates.filter(a => {
              const href = a.getAttribute('href') || '';
              return href.startsWith(requiredPrefix);
            });
            const first = internal[0];
            if (first) {
              const href = first.getAttribute('href');
              const title = (first.textContent || '').trim() || fallbackLabel;
              return { href, title, label: fallbackLabel };
            }
          } catch (_) {}
          return null;
        }

        const [post, log] = await Promise.all([
          latestItem('/writeups/posts/index.html', '/writeups/posts/', 'Writeup'),
          latestItem('/security/logs/index.html', '/security/logs/', 'Security log')
        ]);

        list.innerHTML = '';
        const items = [post, log].filter(Boolean);
        if (items.length === 0) {
          list.innerHTML = '<li class="muted">No recent items yet.</li>';
          return;
        }

        for (const it of items) {
          const li = document.createElement('li');
          li.innerHTML = `<a class="link" href="${it.href}">${it.title}</a> <span class="tag">${it.label}</span>`;
          list.appendChild(li);
        }
      })();
      </script>


      <!-- Footer (component include) -->
      <footer data-include="/components/footer.html"></footer>
    </main>
  </div>
</body>
</html>
