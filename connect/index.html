<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>About & contact · Offband</title>
  <meta name="description" content="About Offband and how to reach us (with optional PGP encryption)." />
  <link rel="stylesheet" href="/assets/site.css" />
  <script defer src="/assets/include.js"></script>
  <script defer src="/assets/sidebar.js"></script>
</head>


<body class="has-hero">
  <header class="topbar">
    <a class="topbar__brand" href="/">
      <img class="logo-badge" src="/assets/logo-badge.svg" alt="" aria-hidden="true" />
      <span class="brand-name">Offband</span>
    </a>
    <nav class="topbar__actions">
      <a class="link" href="/connect/">Login</a>
      <span id="account-badge" class="badge" hidden>acct</span>
    </nav>
  </header>

  <div class="layout">
    <aside id="sidebar" data-include="/components/sidebar.html"></aside>

    <main id="content" class="content">
      <section class="card hero">
        <h1 class="brandmark">
          <img class="logo-badge" src="/assets/logo-badge.svg" alt="" aria-hidden="true" />
          About Offband
        </h1>
        <p class="lede">
          Offband is a security‑first, community‑driven sandbox: homelab notes,
          OSINT experiments, repeatable setups, and small tools — built in public.
        </p>
      </section>

      <section class="feature-grid grid-2">
        <article class="card">
          <h3>Contact</h3>
          <ul class="list-tight">
            <li>General: <a href="mailto:contact@offband.dev">contact@offband.dev</a></li>
            <li>Security: <a href="mailto:security@offband.dev">security@offband.dev</a></li>
          </ul>
          <p class="muted">
            Prefer encryption? Use the PGP widget below or fetch our key in
            <a href="/security.txt">security.txt</a>.
          </p>
        </article>

        <article class="card">
          <h3>Encrypt a message</h3>
          <p class="muted">Browser‑side PGP. Nothing leaves your machine until you send it.</p>
          <p><a class="btn" href="/connect/#encrypt">Open PGP widget</a></p>
        </article>
      </section>

	  <section class="card" id="pgp-widget">
		<h3>Encrypt a message</h3>
		<p>Browser‑side PGP. Nothing leaves your machine until you send it.</p>

		<label>Recipient
		  <select id="pgp-recipient">
		    <option value="connect@offband.dev">connect@offband.dev</option>
		    <option value="security@offband.dev">security@offband.dev</option>
		  </select>
		</label>

		<label>Message
		  <textarea id="pgp-plain" rows="6" placeholder="Write your message…"></textarea>
		</label>

		<div style="margin: 8px 0;">
		  <button id="pgp-encrypt" class="btn btn--primary">Encrypt</button>
		</div>

		<label>Encrypted (ASCII‑armored)
		  <textarea id="pgp-armored" rows="10" readonly placeholder="-----BEGIN PGP MESSAGE-----"></textarea>
		</label>
      </section>

      <footer data-include="/components/footer.html"></footer>
    </main>
  </div>
<!-- OpenPGP (CDN). You can swap to a local copy later if you prefer. -->
<script defer src="https://unpkg.com/openpgp@5.11.1/dist/openpgp.min.js"></script>

<script>
(async function () {
  const KEY_URL = '/assets/pgp/offband.asc';  // you already have this file

  const $ = (sel) => document.querySelector(sel);
  const btn     = $('#pgp-encrypt');
  const plain   = $('#pgp-plain');
  const out     = $('#pgp-armored');
  const rcptSel = $('#pgp-recipient');

  async function loadKey() {
    const res = await fetch(KEY_URL, { cache: 'reload' });
    if (!res.ok) throw new Error('Key fetch failed: ' + res.status);
    const armored = await res.text();
    return await openpgp.readKey({ armoredKey: armored });
  }

  const pubKey = await loadKey(); // load once on page load

  btn?.addEventListener('click', async () => {
    try {
      const message = await openpgp.createMessage({ text: plain.value });
      const encrypted = await openpgp.encrypt({
        message,
        encryptionKeys: pubKey
      });
      out.value = encrypted; // ASCII-armored block
    } catch (e) {
      console.error(e);
      alert('Encryption failed (see console for details).');
    }
  });
})();
</script>
</body>
</html>
