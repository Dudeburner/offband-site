/* =========================================================
   Offband â€” Site Base Styles (single source of truth)
   Scope: global reset, tokens, layout, components, utilities
   ========================================================= */

/* -------------------- TOKENS -------------------- */
:root {
  /* palette */
  --bg: #0b0f14;           /* page background */
  --bg-elev: #121820;      /* elevated surfaces */
  --panel: #0f141b;        /* cards/panels */
  --text: #e6eef8;         /* primary text */
  --muted: #a9b4c0;        /* secondary text */
  --accent: #46e0ff;       /* cyan glow */
  --accent-weak: #2ab6d1;  /* softer accent */
  --border: #1e2630;       /* outlines/dividers */
  --danger: #ff5c70;
  --ok: #58ffa8;
  --warn: #ffd35c;

  /* sizing */
  --radius: 8px;
  --shadow: 0 6px 22px rgba(0,0,0,.38);
  --pad-1: .5rem;   --pad-2: .75rem;  --pad-3: 1rem;  --pad-4: 1.5rem;  --pad-5: 2rem;
  --gap-1: .5rem;   --gap-2: .75rem;  --gap-3: 1rem;  --gap-4: 1.5rem;  --gap-5: 2rem;

  /* layout */
  --maxw: 75vw;     /* brand rule: 75% width center */
  --maxw-narrow: 60ch;
  --sidebar-w: 260px;
  --line: 1px solid var(--border);

  /* fonts */
  --font: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, Arial, "Apple Color Emoji","Segoe UI Emoji";
  --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
}

/* -------------------- RESET -------------------- */
* { box-sizing: border-box; }
html, body { height: 100%; }
html { color-scheme: dark; }
body {
  margin: 0; background: var(--bg); color: var(--text);
  font: 14px/1.55 var(--font);
  text-rendering: optimizeLegibility; -webkit-font-smoothing: antialiased;
}
img, svg, video { max-width: 100%; height: auto; display: block; }
img[aria-hidden="true"], svg[aria-hidden="true"] { pointer-events: none; }

/* Links */
a { color: var(--accent); text-decoration: none; }
a:hover { filter: brightness(1.08); }

/* Typography */
h1,h2,h3,h4 { margin: 0 0 .6rem; line-height: 1.2; }
h1 { font-size: 1.8rem; }
h2 { font-size: 1.4rem; }
h3 { font-size: 1.1rem; }
p { margin: 0 0 1rem; }
small, .small { font-size: .875rem; }
.subtle, .muted { color: var(--muted); }
code,kbd,pre,samp { font-family: var(--mono); font-size: .95em; }
pre { background: #0a0f15; border: var(--line); border-radius: 6px; padding: .75rem; overflow: auto; }
code { background: #0a0f15; border: 1px solid #0e1720; border-radius: 4px; padding: .1rem .3rem; }

/* Lists & Tables */
ul,ol { margin: 0 0 1rem 1.25rem; }
table { width: 100%; border-collapse: collapse; margin: 1rem 0; }
th, td { padding: .6rem .5rem; border-bottom: var(--line); }
th { text-align: left; color: var(--muted); font-weight: 600; }

/* Forms */
input, button, select, textarea { font: inherit; color: inherit; }
input[type="text"], input[type="search"], input[type="email"], textarea, select {
  background: var(--bg-elev); color: var(--text);
  border: var(--line); border-radius: 6px; padding: .5rem .6rem;
}
button { cursor: pointer; background: var(--bg-elev); border: var(--line); border-radius: 6px; padding: .5rem .75rem; color: var(--text); }
button:hover { outline: 1px solid var(--accent-weak); }
:focus-visible { outline: 2px solid var(--accent-weak); outline-offset: 2px; }

/* -------------------- LAYOUT -------------------- */
/* Global topbar always sits above content */
.topbar {
  position: sticky; top: 0; z-index: 1000;
  background: linear-gradient(180deg, rgba(10,14,20,.9), rgba(10,14,20,.6));
  backdrop-filter: blur(8px);
  border-bottom: var(--line);
}
.topbar .container {
  display: flex; align-items: center; justify-content: space-between;
  max-width: var(--maxw); margin: 0 auto; padding: .6rem var(--pad-3);
}
.topbar .brand { display: flex; align-items: center; gap: .5rem; color: var(--text); }
.topbar .brand .logo-badge { width: 28px; height: 28px; }
.topbar .brand-name { font-weight: 600; letter-spacing: .2px; }
.topbar .badges { display: flex; align-items: center; gap: .6rem; }
.topbar .badge {
  display: inline-flex; align-items: center; justify-content: center;
  width: 28px; height: 28px; border-radius: 6px;
  background: var(--bg-elev); border: var(--line);
}
.topbar .badge:hover { outline: 1px solid var(--accent-weak); }
.site-search { display: flex; align-items: center; }
.site-search input[type="search"] {
  height: 28px; padding: 0 .55rem; min-width: 180px;
  border-radius: 6px; border: var(--line);
  background: var(--bg-elev); color: var(--text);
}
.site-search input::placeholder { color: var(--muted); }

/* Main grid */
.layout {
  display: grid; grid-template-columns: var(--sidebar-w) 1fr; gap: var(--gap-4);
  max-width: var(--maxw); margin: 0 auto; padding: var(--pad-4);
}
.content { max-width: var(--maxw); width: 100%; display: flex; flex-direction: column; gap: var(--gap-4); }

/* Sidebar container (visual polish can be tweaked later) */
.sidebar { background: var(--panel); border: var(--line); border-radius: var(--radius); padding: var(--pad-3); }

/* Collapsed sidebar: keep a thin rail so the toggle remains accessible */
:root { --sidebar-rail-w: 56px; }
body.sidebar-collapsed .layout { grid-template-columns: var(--sidebar-rail-w) 1fr; }
body.sidebar-collapsed .sidebar {
  width: var(--sidebar-rail-w);
  padding: var(--pad-2);
  overflow: hidden;
}
/* Hide tree/nav content, but keep the main toggle (#sidebar-toggle) accessible */
body.sidebar-collapsed .sidebar nav,
body.sidebar-collapsed .sidebar .tree { display: none; }
body.sidebar-collapsed .sidebar .toolbar > *:not(#sidebar-toggle) { display: none; }
#sidebar-toggle { display: inline-flex; align-items: center; justify-content: center; }

/* -------------------- SIDEBAR NAV -------------------- */
nav.sidebar .tree { list-style: none; margin: 0; padding: 0; display: flex; flex-direction: column; gap: .25rem; }
nav.sidebar .row { display: flex; align-items: center; gap: .5rem; padding: .35rem .4rem; border-radius: 6px; }
nav.sidebar .row:hover { background: rgba(255,255,255,.03); }
nav.sidebar a { color: var(--text); }
nav.sidebar a.active { color: #fff; text-shadow: 0 0 12px rgba(70,224,255,.35); }
nav.sidebar .folder > .row { cursor: pointer; user-select: none; }
nav.sidebar .twisty { width: 1ch; text-align: center; }
nav.sidebar .toolbar { display: flex; gap: .5rem; margin-bottom: .5rem; }

/* -------------------- CARDS / HERO / BUTTONS -------------------- */
.card { background: var(--panel); border: var(--line); border-radius: var(--radius); box-shadow: var(--shadow); padding: var(--pad-4); }
.hero { padding: calc(var(--pad-4) + .5rem); }
.hero--center { text-align: center; }
.brandmark { display: inline-flex; align-items: center; gap: .6rem; font-weight: 700; }
.logo-badge { width: 32px; height: 32px; }

.btn { display: inline-block; padding: .55rem .9rem; border-radius: 6px; border: var(--line); background: var(--bg-elev); color: var(--text); }
.btn--primary { background: radial-gradient(120% 120% at 10% 10%, var(--accent), var(--accent-weak)); color: #001217; border-color: transparent; }
.btn + .btn { margin-left: .5rem; }

/* -------------------- SPECIAL VIEWS -------------------- */
/* 404 */
.notfound-hero { text-align: center; }
.notfound-hero .actions { display: flex; gap: .5rem; justify-content: center; margin-top: .75rem; }

/* Security dashboard (placeholder primitives, expand later) */
.grid { display: grid; gap: var(--gap-3); }
.grid.cols-2 { grid-template-columns: repeat(2, minmax(0,1fr)); }
.grid.cols-3 { grid-template-columns: repeat(3, minmax(0,1fr)); }
.grid.cols-4 { grid-template-columns: repeat(4, minmax(0,1fr)); }

/* Writeups content */
.prose { max-width: var(--maxw-narrow); }
.prose p { margin-bottom: 1rem; }
.prose h2 { margin-top: 1.25rem; }
.prose pre { margin: 1rem 0; }
.prose img { border-radius: 6px; border: var(--line); }

/* Footer */
.site-footer { border-top: var(--line); margin-top: var(--pad-5); }
.site-footer .footer-row { display: flex; align-items: center; justify-content: space-between; gap: 1rem; padding: var(--pad-3) var(--pad-4); max-width: var(--maxw); margin: 0 auto; }
.site-footer .footer-nav { display: inline-flex; gap: .75rem; }

/* -------------------- UTILITIES -------------------- */
.center { display: flex; align-items: center; justify-content: center; }
.right { margin-left: auto; }
.hidden { display: none !important; }
.mono { font-family: var(--mono); }
.nowrap { white-space: nowrap; }

/* Spacing helpers */
.mt-0{margin-top:0}.mt-1{margin-top:.25rem}.mt-2{margin-top:.5rem}.mt-3{margin-top:1rem}
.mb-0{margin-bottom:0}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-3{margin-bottom:1rem}
.p-1{padding:.25rem}.p-2{padding:.5rem}.p-3{padding:1rem}

/* Badges/labels */
.badge-chip { display:inline-flex; align-items:center; gap:.35rem; padding:.15rem .45rem; border-radius: 999px; border: var(--line); background: var(--bg-elev); font-size:.85em; }
.badge-chip.ok{ color: var(--ok);} .badge-chip.warn{ color: var(--warn);} .badge-chip.danger{ color: var(--danger);}

/* -------------------- RESPONSIVE -------------------- */
@media (max-width: 1100px) {
  :root { --maxw: 92vw; }
  .layout { grid-template-columns: minmax(0,1fr); }
  .sidebar { display: none; }
}
@media (max-width: 640px) {
  .topbar .container { padding: .5rem var(--pad-2); }
  .site-search input[type="search"] { min-width: 140px; }
  .btn { padding: .5rem .7rem; }
}

/* -------------------- PRINT (minimal) -------------------- */
@media print {
  :root { --bg: #fff; --text: #000; --border: #ddd; }
  body { background: #fff; color: #000; }
  .topbar, .sidebar, .site-footer { display: none !important; }
  .layout { padding: 0; }
  a { color: inherit; text-decoration: underline; }
}
